%section
  .modal-dialog{:role => "document"}
    .row.modal-content
      .modal-body
        .col-xs-12
          %h2= t('devise.new_user_title')
        .col-xs-offset-1.col-xs-10
          -# ORIGINAL = form_for(resource, as: resource_name, url: registration_path(resource_name), html: {class: 'form-horizontal'}) do |f|
          -# OLD = simple_form_for( resource, as: resource_name, url: registration_path(resource_name), html: { class: 'form-horizontal' }, defaults: {input_html: { class: 'form-control' }} ) do |f|
          = simple_form_for( resource, as: resource_name, url: user_registration_path(),  |
                             method: 'post', html: { class: 'form-horizontal' },          |
                             defaults: {input_html: { class: 'form-control' }} ) do |f|   |
            - unless f.error_notification.nil?
              .form-group
                .col-xs-12
                  .alert.alert-danger
                    %i= devise_error_messages!
            .form-group
              .col-xs-8
                = f.input( :email, required: true, autofocus: true, placeholder: I18n.t("devise.email_placeholder"), label: I18n.t("devise.email_label") )
                -#= f.label( :email, for: :user_email, class: 'control-label' )
                -#= f.email_field( :email, autofocus: true )
            .form-group
              .col-xs-5
                = f.input( :password, required: true )
                -#= f.label( :password, for: :user_password, class: 'control-label' )
                -#= f.password_field( :password, autocomplete: "off" )
              .col-xs-1
                &nbsp;
              .col-xs-5
                = f.input( :password_confirmation, required: true )
                -#= f.label( :password_confirmation, for: :user_password_confirmation, class: 'control-label' )
                -#= f.password_field( :password_confirmation )
            .form-group
              .col-xs-5
                = f.input( :name, required: true )
                -#= f.label( :name, for: :user_name, class: 'control-label' )
                -#= f.text_field( :name )
            .form-group
              .col-xs-5
                = f.input( :first_name, required: true )
                -#= f.label( :first_name, for: :user_first_name, class: 'control-label' )
                -#= f.text_field( :first_name )
              .col-xs-1
                &nbsp;
              .col-xs-5
                = f.input( :last_name, required: true )
                -#= f.label( :last_name, for: :user_last_name, class: 'control-label' )
                -#= f.text_field( :last_name )
            .form-group
              .col-xs-11
                = f.input( :description )
                -#= f.label( :description, for: :user_description, class: 'control-label' )
                -#= f.text_field( :description )
            .form-group
              .col-xs-4
                = f.input( :year_of_birth, required: true, placeholder: Date.today.year - 50 )
                -#= f.label( :year_of_birth, for: :user_year_of_birth, class: 'control-label' )
                -#= f.text_field( :year_of_birth, class: 'input-mini', autocomplete: 'off',       |
                -#    'data-provide' => 'typeahead',                                              |
                -#    'data-source' => (1900 .. Date.today.year+1).to_a.collect{|e|e.to_s}.to_s,  |
                -#    placeholder: Date.today.year - 50 )                                         |
            .form-group
              .col-xs-12
                = f.button( :submit, t('devise.new_user_submit'), class: "btn btn-primary" )
        = render( "users/shared/links" )

= render( partial: 'goggles/privacy_disclaimer' )

%script
  function updateDescription() {                                                |
      var new1st = $( '#user_first_name' ).val();                               |
      var cur2nd = $( '#user_last_name' ).val();                                |
      $('#user_description').val( new1st + ' ' + cur2nd );                      |
  };                                                                            |
  $('#user_first_name').change( function(){ updateDescription(); } );
  $('#user_last_name').change( function(){ updateDescription(); } );
