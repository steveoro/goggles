= render( partial: 'tabs_and_radio_title' )
- cache( cache_key_for_swimmer( 'supermaster', @swimmer.id, @max_updated_at, false, false, @badge.id ) ) do
  - supermaster_score = @sssc.calculate_supermaster_score
  - ironmaster_score = @sssc.calculate_ironmaster_score
  - team_ranking_score = @sssc.calculate_team_ranking_score
  .row-fluid#swimmer_supermaster
    .goggles-category-gap#pageTop
      .offset1.span10
        %table.table.table-striped.table-bordered.table-hover.table-condensed
          %tbody
            %tr{'class'=>'info'}
              %td.goggles-centeralign{'colspan'=>6}
                %b= @season.get_full_name
            %tr
              %td
                %b= @swimmer.get_full_name  
              %td
                %b= @swimmer.year_of_birth 
              %td
                %b= @badge.category_type.code  
              %td
                %b= @badge.number
              %td
                %b= @team.get_verbose_name  
              %td
                %b= @team_affiliation.number

  .row-fluid
    .goggles-category-gap#charts
      .span4
        %p.btn.btn-large.btn-block.btn-success
          %b= "#{I18n.t('supermaster.supermaster')}<br>#{supermaster_score.score}".html_safe
          = ''
      .span4
        .btn.btn-large.btn-block.btn-warning
          %b= "#{I18n.t('supermaster.ironmaster')}<br>#{ironmaster_score.score}".html_safe
          = ''
      .span4
        %p.btn.btn-large.btn-block.btn-info
          %b= "#{I18n.t('supermaster.team_ranking')}<br>#{team_ranking_score.score}".html_safe
          = ''

  .row-fluid.goggles-category-gap#rankings
    .span8
      %table.table.table-bordered.table-hover.table-condensed
        %tbody
          %tr{'class'=>'info'}
            %td
              %b= I18n.t('supermaster.rankings')
              %a{ href: "#pageTop", 'data-toggle'=>'tooltip', 'title'=>I18n.t('top_of_page') }= image_tag('bullet_arrow_up.png')
            %td.goggles-rightalign
              %b= I18n.t('supermaster.number_short')
            %td.goggles-rightalign
              %b= I18n.t('supermaster.score')
            %td.goggles-rightalign
              %b= I18n.t('supermaster.everage')
            %td.goggles-rightalign
              %b= I18n.t('supermaster.best')
            %td.goggles-rightalign
              %b= I18n.t('supermaster.worst')
          - if supermaster_score.score > 0
            %tr
              %td
                %b= "#{I18n.t('supermaster.supermaster_short')} - #{I18n.t('supermaster.supermaster')}"
              %td.goggles-rightalign{ 'class' => supermaster_score.number >= 5 ? 'success' : supermaster_score.number > 2 ? 'warning' : 'error' }
                = supermaster_score.number 
              %td.goggles-rightalign
                %b= supermaster_score.score 
              %td.goggles-rightalign
                = supermaster_score.average.round(2)
              %td.goggles-rightalign
                = supermaster_score.max 
              %td.goggles-rightalign
                = supermaster_score.min 
          - if ironmaster_score.score > 0
            %tr
              %td
                %b= "#{I18n.t('supermaster.ironmaster_short')} - #{I18n.t('supermaster.ironmaster')}"
              %td.goggles-rightalign{ 'class' => ironmaster_score.number >= 18 ? 'success' : ironmaster_score.number > 9 ? 'warning' : 'error' }
                = ironmaster_score.number 
              %td.goggles-rightalign
                %b= ironmaster_score.score 
              %td.goggles-rightalign
                = ironmaster_score.average.round(2)
              %td.goggles-rightalign
                = ironmaster_score.max 
              %td.goggles-rightalign
                = ironmaster_score.min 
          - if team_ranking_score.score > 0
            %tr
              %td
                %b= "#{I18n.t('supermaster.team_ranking_short')} - #{I18n.t('supermaster.team_ranking')}"
              %td.goggles-rightalign{ 'class' => team_ranking_score.number >= 3 ? 'success' : team_ranking_score.number > 2 ? 'warning' : 'error' }
                = team_ranking_score.number 
              %td.goggles-rightalign
                %b= team_ranking_score.score 
              %td.goggles-rightalign
                = team_ranking_score.average.round(2)
              %td.goggles-rightalign
                = team_ranking_score.max 
              %td.goggles-rightalign
                = team_ranking_score.min 
    .span2
      %table.table.table-bordered.table-hover.table-condensed
        %tbody
          %tr{'class'=>'info'}
            %td{'colspan'=>2}
              %b= I18n.t('medals')
              %a{ href: "#pageTop", 'data-toggle'=>'tooltip', 'title'=>I18n.t('top_of_page') }= image_tag('bullet_arrow_up.png')
          - MedalType.are_not_jokes.sort_by_rank.each do |medal_type|
            %tr
              %td
                = image_tag( medal_type.get_medal_tag )
                %b= medal_type.i18n_description
              %td.goggles-rightalign
                %b= @meeting_individual_results.has_rank(medal_type.rank).count
    .span2
      %table.table.table-bordered.table-hover.table-condensed
        %tbody
          %tr{'class'=>'info'}
            %td{'colspan'=>2}
              %b= I18n.t('supermaster.score')
              %a{ href: "#pageTop", 'data-toggle'=>'tooltip', 'title'=>I18n.t('top_of_page') }= image_tag('bullet_arrow_up.png')
          %tr
            %td
              %b= I18n.t('supermaster.best')
            %td.goggles-rightalign
              %b= @meeting_individual_results.first.standard_points
          %tr
            %td
              %b= I18n.t('supermaster.worst')
            %td.goggles-rightalign
              %b= @meeting_individual_results.last.standard_points
          %tr
            %td
              %b= I18n.t('supermaster.everage')
            %td.goggles-rightalign
              %b= (@meeting_individual_results.collect{ |row| row.standard_points }.sum / @meeting_individual_results.count).round(2)

  .row-fluid
    .goggles-category-gap#meetings
      %table.table.table-striped.table-bordered.table-hover.table-condensed
        %tbody
          %tr{'class'=>'info'}
            %td
              %b= "#{I18n.t('supermaster.meetings')} (#{@badge.meetings.uniq.count})"
              %a{ href: "#pageTop", 'data-toggle'=>'tooltip', 'title'=>I18n.t('top_of_page') }= image_tag('bullet_arrow_up.png')
            %td
              %b= I18n.t('supermaster.event_type')
            %td.goggles-rightalign
              %b= I18n.t('meeting.rank')
            %td.goggles-rightalign
              %b= I18n.t('meeting.timing')
            %td.goggles-rightalign
              %b= I18n.t('supermaster.score')
            %td.goggles-centeralign
              %b= I18n.t('supermaster.supermaster_short')
            %td.goggles-centeralign
              %b= I18n.t('supermaster.ironmaster_short')
            %td.goggles-centeralign
              %b= I18n.t('supermaster.team_ranking_short')
          - @meeting_individual_results.each do |mir|
            %tr
              %td
                = mir.meeting.decorate.get_linked_full_name_with_date
              %td
                = "#{mir.event_type.code} (#{mir.pool_type.code})"
              %td.goggles-rightalign
                = mir.decorate.show_any_rank_medal
                = mir.decorate.get_rank_description
              %td.goggles-rightalign
                = mir.get_timing
              %td.goggles-rightalign
                = mir.standard_points
              %td.goggles-centeralign
                = show_tag( supermaster_score.results.include?( mir ) )
              %td.goggles-centeralign
                = show_tag( ironmaster_score.results.include?( mir ) )
              %td.goggles-centeralign
                = show_tag( team_ranking_score.results.include?( mir ) )
                
              
  .row-fluid
    .goggles-category-gap#bottom_of_page
