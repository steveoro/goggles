<ul class="nav nav-tabs">
	<%= content_tag( :li, link_to(t('admin_import.step_1'), goggles_di_step1_status_path()), 	:class => 'active' ) %>
	<%= content_tag( :li, link_to(t('admin_import.step_2'), '#'),	:class => 'active' ) %>
	<%= content_tag( :li, link_to(t('admin_import.step_3'), '#'), 	:class => 'disabled' ) %>
</ul>


<% if @data_import_session_id %>
	<p class="text-center lead">
		<%= "#{I18n.t('admin_import.import_event_results_title')}" %>: (2/3) <%="#{I18n.t(:review_edit_data)}"%>
		<div class="row">
			<div class="span8 offset1">
				<%= form_tag( 'step3_commit',
						:multipart => true, :class => 'form-horizontal',
						:onsubmit => "$('#btnSubmit').hide(); $('#loadingIndicator').show();"
# TODO FUTURE DEV with worker thread:
#						:onsubmit => "$('#btnSubmit').hide(); $('#loadingIndicator').show(); " +
#						             "$('#divProgress').show(); setInterval( function(){ $('#divProgress').load('" +
#						             goggles_di_get_step_progress_path(:id => @data_import_session_id) +
#						             "'); }, 3000);"
					) do -%>
					<div class="control-group">
						<label class="control-label" for="data_import_session_id"><%= I18n.t(:session, :scope =>[:admin_import]) %></label>
						<div class="controls">
							<%= text_field_tag( :data_import_session_id, @data_import_session_id, :disabled => true, :class => "span1" ) %>
							<%= hidden_field_tag( :data_import_session_id, @data_import_session_id ) %>
							<span class="help-inline strong"><%= @season_description %></span>
							&nbsp; &nbsp;
						  	<%= submit_tag( I18n.t(:commit_rows), :id => "btnSubmit", :class => 'btn' ) %>
						  	<span id='loadingIndicator' hidden='true'><%= I18n.t(:please_wait) %>&nbsp;<%= image_tag( 'indicator.gif' ) %></span>
							<div id="divProgress" hidden='true' class="progress progress-striped active"></div>
						</div>
					</div>
				<% end %>
			</div>
		</div>
	</p>

	<%= netzke :data_import_checkout_container, {
		:class_name => "DataImportCheckoutPanel",
		:width => "100%",
		:height => @max_view_height,
		:border => true,
        :data_import_session_id => @data_import_session_id,
 		:view_config => {
			:force_fit => true # force the columns to occupy all the available width
		}
	} %>
<% else %>
	<div align="center" style="padding-top: 2em; padding-bottom: 20em;">
		<p><i><%= t(:warning_no_import_data_session_found) %></i></p>
	</div>
<% end %>
