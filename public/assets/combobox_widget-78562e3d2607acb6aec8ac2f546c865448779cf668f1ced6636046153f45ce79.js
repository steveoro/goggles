!function(t){t.widget("ui.combobox",{version:"1.00",widgetEventPrefix:"combobox",uiCombo:null,uiInput:null,_wasOpen:!1,_create:function(){var e,i,n=this.element.hide();e=this.uiInput=t("<input />").insertAfter(n).addClass("ui-widget ui-widget-content ui-corner-left ui-combobox-input").val(n.children(":selected").text()).attr("tabindex",n.attr("tabindex")).width(t(this.element).width()),i=this.uiCombo=e.wrap("<span>").parent().addClass("ui-combobox").insertAfter(n),e.autocomplete({delay:0,minLength:0,appendTo:i,source:t.proxy(this,"_linkSelectList"),select:function(e,i){t(this).attr("title",i.item.value)}}),t("<button>").attr("tabIndex",-1).attr("type","button").insertAfter(e).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon ui-combobox-button"),e.data("ui-autocomplete")._renderItem=function(e,i){return t("<li>").attr("class",i.option.className).append(t("<a>").html(i.label)).appendTo(e)},this._on(this._events)},_linkSelectList:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(e.term),"i");i(this.element.children('option:not([style*="display: none"])').map(function(){var i=t(this).text();if(this.value&&(!e.term||n.test(i))){var r={label:i,value:i,option:this};return e.term&&(r.label=i.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.ui.autocomplete.escapeRegex(e.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")),r}}))},_events:{"autocompletechange input":function(e,i){var n=t(e.currentTarget),r=i.item?i.item.option:null;if(!i.item){var s=new RegExp("^"+t.ui.autocomplete.escapeRegex(n.val())+"$","i"),o=!1,a=null,l=0,h=-1,c=-1,u=null;if(this.options.autofillsinglematch&&(a=new RegExp(t.ui.autocomplete.escapeRegex(n.val()),"i")),this.element.children("option").each(function(){var e=t(this).text();return e.match(s)?(this.selected=o=!0,!1):void(a&&(h++,e.match(a)&&(l++,u=t(this),c=h)))}),!o)if(1==l){r=u[0],r.selected=!0;var d=u.text();n.val(d),n.data("ui-autocomplete").term=d,this.element.prop("selectedIndex",c)}else n.val(""),n.data("ui-autocomplete").term="",this.element.prop("selectedIndex",-1)}this._trigger("change",e,{item:r})},"autocompleteselect input":function(t,e){e.item.option.selected=!0,this._trigger("select",t,{item:e.item.option})},"autocompleteopen input":function(){this.uiCombo.children(".ui-autocomplete").outerWidth(this.uiCombo.outerWidth(!0))},"mousedown .ui-combobox-button":function(){this._wasOpen=this.uiInput.autocomplete("widget").is(":visible")},"click .ui-combobox-button":function(){this.uiInput.focus(),this._wasOpen||this.uiInput.autocomplete("search","")}},value:function(t){var e,i=this.element,n=!1;return arguments.length?(i.prop("selectedIndex",-1),i.children("option").each(function(){if(this.value==t)return this.selected=n=!0,!1}),void(n?(this.uiInput.val(i.children(":selected").text()),this.uiInput.attr("title",i.children(":selected").text())):(this.uiInput.val(""),this.element.prop("selectedIndex",-1)))):(e=i.children(":selected"),e.length>0?e.val():null)},_destroy:function(){this.element.show(),this.uiCombo.replaceWith(this.element)},widget:function(){return this.uiCombo},_getCreateEventData:function(){return{select:this.element,combo:this.uiCombo,input:this.uiInput}}})}(jQuery);