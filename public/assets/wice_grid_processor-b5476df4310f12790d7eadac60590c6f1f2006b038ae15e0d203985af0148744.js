(function(){var t;t=function(){function t(t,e,i,n,r,s,a){this.name=t,this.baseRequestForFilter=e,this.baseLinkForShowAllRecords=i,this.linkForExport=n,this.parameterNameForQueryLoading=r,this.parameterNameForFocus=s,this.environment=a,this.filterDeclarations=new Array,this.checkIfJsFrameworkIsLoaded()}return t.prototype.checkIfJsFrameworkIsLoaded=function(){if(!jQuery)return alert("jQuery not loaded, WiceGrid cannot proceed!")},t.prototype.toString=function(){return"<WiceGridProcessor instance for grid '"+this.name+"'>"},t.prototype.process=function(t){return this.visit(this.buildUrlWithParams(t))},t.prototype.visit=function(t){return"undefined"!=typeof Turbolinks&&null!==Turbolinks?Turbolinks.visit(t):window.location=t},t.prototype.setProcessTimer=function(t){var e;return this.timer&&(clearTimeout(this.timer),this.timer=null),e=this,this.timer=setTimeout(function(){return e.process(t)},1e3)},t.prototype.reloadPageForGivenGridState=function(t){var e;return e=this.gridStateToRequest(t),this.visit(this.appendToUrl(this.baseLinkForShowAllRecords,e))},t.prototype.gridStateToRequest=function(t){return jQuery.map(t,function(t){return encodeURIComponent(t[0])+"="+encodeURIComponent(t[1])}).join("&")},t.prototype.appendToUrl=function(t,e){var i;return i=t.indexOf("?")!==-1?/[&\?]$/.exec(t)?"":"&":"?",t+i+e},t.prototype.buildUrlWithParams=function(t){var e,i,n;return n=new Array,jQuery.each(this.filterDeclarations,function(t){return function(e,i){var r;if(r=t.readValuesAndFormQueryString(i.filterName,i.detached,i.templates,i.ids),r&&""!==r)return n.push(r)}}(this)),i=this.baseRequestForFilter,0!==n.length&&(e=n.join("&"),i=this.appendToUrl(i,e)),t&&(i=this.appendToUrl(i,this.parameterNameForFocus+t)),i},t.prototype.reset=function(){return this.visit(this.baseRequestForFilter)},t.prototype.exportToCsv=function(){return this.visit(this.linkForExport)},t.prototype.register=function(t){return this.filterDeclarations.push(t)},t.prototype.readValuesAndFormQueryString=function(t,e,i,n){var r,s,a,o,l,h,c,u,d,p;for(d=new Array,s=o=0,c=i.length-1;0<=c?o<=c:o>=c;s=0<=c?++o:--o){if(null===$(n[s]))return"development"===this.environment&&(h='WiceGrid: Error reading state of filter "'+t+'". No DOM element with id "'+n[s]+'" found.',e&&(h+='You have declared "'+t+'" as a detached filter but have not output it anywhere in the template. Read documentation about detached filters.'),alert(h)),"";if(r=$("#"+n[s]),r[0]&&"checkbox"===r[0].type?r[0].checked&&(p=1):p=r.val(),p instanceof Array)for(a=l=0,u=p.length-1;0<=u?l<=u:l>=u;a=0<=u?++l:--l)p[a]&&""!==p[a]&&d.push(i[s]+encodeURIComponent(p[a]));else p&&""!==p&&d.push(i[s]+encodeURIComponent(p))}return d.join("&")},t}(),t._version="3.4",window.WiceGridProcessor=t}).call(this);