!function(t){function e(t){function e(t,e){for(var i=null,n=0;n<e.length&&t!=e[n];++n)e[n].stack==t.stack&&(i=e[n]);return i}function i(t,i,n){if(null!=i.stack&&i.stack!==!1){var r=e(i,t.getData());if(r){for(var s,a,o,l,h,c,u,d,p=n.pointsize,f=n.points,g=r.datapoints.pointsize,m=r.datapoints.points,v=[],b=i.lines.show,y=i.bars.horizontal,_=p>2&&(y?n.format[2].x:n.format[2].y),x=b&&i.lines.steps,w=!0,k=y?1:0,S=y?0:1,T=0,C=0;;){if(T>=f.length)break;if(u=v.length,null==f[T]){for(d=0;d<p;++d)v.push(f[T+d]);T+=p}else if(C>=m.length){if(!b)for(d=0;d<p;++d)v.push(f[T+d]);T+=p}else if(null==m[C]){for(d=0;d<p;++d)v.push(null);w=!0,C+=g}else{if(s=f[T+k],a=f[T+S],l=m[C+k],h=m[C+S],c=0,s==l){for(d=0;d<p;++d)v.push(f[T+d]);v[u+S]+=h,c=h,T+=p,C+=g}else if(s>l){if(b&&T>0&&null!=f[T-p]){for(o=a+(f[T-p+S]-a)*(l-s)/(f[T-p+k]-s),v.push(l),v.push(o+h),d=2;d<p;++d)v.push(f[T+d]);c=h}C+=g}else{if(w&&b){T+=p;continue}for(d=0;d<p;++d)v.push(f[T+d]);b&&C>0&&null!=m[C-g]&&(c=h+(m[C-g+S]-h)*(s-l)/(m[C-g+k]-l)),v[u+S]+=c,T+=p}w=!1,u!=v.length&&_&&(v[u+2]+=c)}if(x&&u!=v.length&&u>0&&null!=v[u]&&v[u]!=v[u-p]&&v[u+1]!=v[u-p+1]){for(d=0;d<p;++d)v[u+p+d]=v[u+d];v[u+1]=v[u-p+1]}}n.points=v}}}t.hooks.processDatapoints.push(i)}var i={series:{stack:null}};t.plot.plugins.push({init:e,options:i,name:"stack",version:"1.2"})}(jQuery);