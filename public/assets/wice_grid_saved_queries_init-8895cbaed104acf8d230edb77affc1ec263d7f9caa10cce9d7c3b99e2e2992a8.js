(function(){var t,e,i,n,r;$(document).on("turbolinks:load",function(){return r()}),r=function(){return $(".wice-grid-save-query-field").keydown(function(t){if(13===t.keyCode)return n($(this).next(),t)}),$(".wice-grid-save-query-button").click(function(t){return n(this,t)}),$(".wice-grid-delete-query").click(function(e){return t(this,e)}),$(".wice-grid-query-load-link").click(function(t){return e(this,t)})},e=function(t,e){var i,n,r;return(i=window.getGridProcessorForElement(t))&&(n=$(t).data("query-id"),r=i.appendToUrl(i.buildUrlWithParams(),i.parameterNameForQueryLoading+encodeURIComponent(n)),i.visit(r)),e.preventDefault(),e.stopPropagation(),!1},t=function(t,e){var n,r,s;return n=$(t).data("wg-confirm"),s=n?function(){return confirm(n)}:function(){return!0},s()&&(r=window.getGridProcessorForElement(t))&&jQuery.ajax({url:$(t).attr("href"),async:!0,dataType:"json",success:function(t){return i(t,r.name)},type:"POST"}),e.preventDefault(),e.stopPropagation(),!1},n=function(t,e){var n,r,s,a,o,l,h,c;if(s=window.getGridProcessorForElement(t))return n=$(t),r=n.data("base-path-to-query-controller"),a=n.data("parameters"),l=n.data("ids"),o=n.prev(),l instanceof Array&&l.each(function(t){return a.push(["extra["+t+"]",$("#"+t).val()])}),h=o.val(),c=s.gridStateToRequest(a),jQuery.ajax({url:r,async:!0,data:c+"&query_name="+encodeURIComponent(h),dataType:"json",success:function(t){return i(t,s.name,h,o)},type:"POST"}),e.preventDefault(),!1},i=function(i,n,r,s){var a,o,l,h,c;return h="#"+n+"_notification_messages",o="#"+n+"_title",c="#"+n+"_query_list",r&&s.val(""),(a=i.error_messages)?$(h).text(a):((l=i.notification_messages)&&$(h).text(l),r&&$(o).html("<h3>"+r+"</h3>"),$(c).replaceWith(i.query_list),jQuery.ui&&$(c).effect("highlight"),$(".wice-grid-delete-query",$(c)).click(function(e){return t(this,e)}),$(".wice-grid-query-load-link",$(c)).click(function(t){return e(this,t)}))}}).call(this);